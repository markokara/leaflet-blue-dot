<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dijital BroÅŸÃ¼r (SVG iÃ§i hotspot)</title>
<style>
  :root{--border:#cfe3da;--shadow:0 10px 28px rgba(0,0,0,.18);--brand:#0f5132}
  html,body{height:100%;margin:0;background:#0f3b2e;font:14px system-ui}
  /* Sahne: yalnÄ±zca SVG var; hotspotlarÄ± SVGâ€™nin iÃ§ine enjekte edeceÄŸiz */
  #stage{position:fixed; inset:0}
  #plan{position:absolute; inset:0; width:100%; height:100%; border:0}
  /* Popup */
  .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:50}
  .modal.on{display:flex}
  .back{position:absolute; inset:0; background:rgba(0,0,0,.45)}
  .card{position:relative; background:#fff; border:1px solid var(--border); border-radius:16px;
        box-shadow:var(--shadow); width:min(520px,92vw); padding:14px}
  .btn{padding:9px 12px; border:1px solid var(--border); border-radius:10px;
       background:#e6f4ef; color:var(--brand); font-weight:700; cursor:pointer}
  .muted{color:#5b6a6a; font-size:13px}
</style>
</head>
<body>

<div id="stage">
  <!-- PDFâ€™ten export ettiÄŸin SVG burada gÃ¶sterilecek -->
  <object id="plan" type="image/svg+xml"></object>
</div>

<!-- Popup (sayfa Ã¼stÃ¼nde) -->
<div id="m" class="modal"><div class="back" id="close"></div>
  <div class="card">
    <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
      <div id="p-title" style="font-weight:700;color:#0f5132">BaÅŸlÄ±k</div>
      <button class="btn" id="close2">Kapat</button>
    </div>
    <div id="p-desc" class="muted" style="margin:8px 0"></div>
    <div id="p-links" style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px"></div>
  </div>
</div>

<script>
/* ================= AYARLAR =================
   SVG_URL:   Illustratorâ€™dan export ettiÄŸin SVGâ€™nin WEB yolu.
   NOT: C:\... OLMAZ. Repona koy ve ./assets/... olarak ver.                               */
const SVG_URL = "https://markokara.github.io/leaflet-blue-dot/HARITA_INFO_EN_2025_RC_O6.svg";

/* Misafir paneli: derin linkle gidilecek harita */
const GUEST_PANEL_URL = "https://markokara.github.io/leaflet-blue-dot/index.html";

/* === HOTSPOTS ===
   Her Ã¶ÄŸe SVGâ€™nin viewBox koordinat sisteminde tanÄ±mlanÄ±r (x,y,w,h).
   x,y: sol-Ã¼st kÃ¶ÅŸe | w,h: tÄ±klanabilir kutunun boyutu.
   Tam satÄ±rÄ±n Ã¼stÃ¼ne denk gelmesi iÃ§in Illustratorâ€™dan aldÄ±ÄŸÄ±n x,yâ€™yi yaz;
   w,hâ€™yi satÄ±r geniÅŸliÄŸine gÃ¶re ayarlarsÄ±n (deneme: 240x34 iyi baÅŸlar).
*/
const HOTSPOTS = [
  {
    id:   "gfl-olive-main-restaurant",
    title:"ðŸ½ï¸ Olive Main Restaurant",
    desc: "Garden Floor (âˆ’1) â€¢ Breakfast 06:30â€“10:00 â€¢ Lunch 12:30â€“15:00 â€¢ Dinner 19:00â€“21:30",
    fid:  "gfl-olive-main-restaurant",
    x:    808.98,   // â† Illustratorâ€™dan verdiÄŸin X
    y:    507.2,    // â† Illustratorâ€™dan verdiÄŸin Y
    w:    10px,      // satÄ±r geniÅŸliÄŸi (gerektikÃ§e artÄ±r/azalt)
    h:    1px,       // satÄ±r yÃ¼ksekliÄŸi
    menu: "https://www.regnumhotels.com/en/"  // â€œÄ°nceleâ€ linki (opsiyonel)
  }
  // â†’ 58 yer iÃ§in kopyala-yapÄ±ÅŸtÄ±r; sadece id/title/desc/fid ve x,y,w,h deÄŸiÅŸtir.
];

/* ================== UYGULAMA ================== */
const obj = document.getElementById('plan');
obj.data = SVG_URL;

/* Misafir paneline derin link */
function goToGuest(fid){
  const u = new URL(GUEST_PANEL_URL);
  u.searchParams.set('dest','fid:'+fid);
  u.searchParams.set('autoGo','1');
  u.searchParams.set('follow','1');
  u.searchParams.set('lang','tr');
  location.href = u.toString();
}

/* Popup yardÄ±mcÄ±larÄ± */
function openPopup(h){
  document.getElementById('p-title').textContent = h.title || "Detay";
  document.getElementById('p-desc').textContent  = h.desc  || "";
  const links = document.getElementById('p-links');
  links.innerHTML = "";
  if (h.menu){
    const a = document.createElement('a');
    a.className = 'btn'; a.textContent = 'Ä°ncele';
    a.href = h.menu; a.target = "_blank"; a.rel="noopener";
    links.appendChild(a);
  }
  const go = document.createElement('button');
  go.className='btn'; go.textContent='Git â†’ Haritada AÃ§';
  go.onclick = ()=> goToGuest(h.fid);
  links.appendChild(go);

  document.getElementById('m').classList.add('on');
}
document.getElementById('close').onclick  =
document.getElementById('close2').onclick = ()=> document.getElementById('m').classList.remove('on');

/* SVG yÃ¼klendiÄŸinde: hotspotlarÄ± SVG Ä°Ã‡Ä°NE yerleÅŸtir (en Ã¼stte, tam hizalÄ±) */
obj.addEventListener('load', ()=>{
  const svgDoc = obj.contentDocument;
  const svg    = svgDoc && svgDoc.querySelector('svg');
  if(!svg){ console.warn("SVG bulunamadÄ±."); return; }

  // viewBox kontrol (bilgi amaÃ§lÄ±)
  const vb = svg.viewBox && svg.viewBox.baseVal;
  console.log("viewBox:", vb?.x, vb?.y, vb?.width, vb?.height);

  // Hotspotlar iÃ§in katman
  let layer = svg.getElementById('__hotspots__');
  if(!layer){
    layer = svgDoc.createElementNS('http://www.w3.org/2000/svg','g');
    layer.setAttribute('id','__hotspots__');
    layer.setAttribute('style','pointer-events:auto');
    svg.appendChild(layer); // en Ã¼ste gelsin
  }

  // Basit SVG iÃ§i stil (ÅŸeffaf ama tÄ±klanabilir kutu + istersen yanÄ±na kÃ¼Ã§Ã¼k buton)
  const style = svgDoc.createElementNS('http://www.w3.org/2000/svg','style');
  style.textContent = `
    .hotbox{ fill:rgba(255,255,255,0.01); stroke:none; cursor:pointer; }
    .pill{ fill:#ffffff; stroke:#cfe3da; stroke-width:1; rx:6; ry:6; }
    .pill-text{ font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; font-size:14px; fill:#0f5132; pointer-events:none; }
  `;
  svg.appendChild(style);

  // Her hotspot iÃ§in tÄ±klanabilir dikdÃ¶rtgen oluÅŸtur
  HOTSPOTS.forEach(h=>{
    const g = svgDoc.createElementNS('http://www.w3.org/2000/svg','g');
    g.setAttribute('data-id', h.id);

    // 1) YazÄ±nÄ±n Ã¼stÃ¼ne oturan, gÃ¶rÃ¼nmez ama tÄ±klanÄ±r kutu
    const r = svgDoc.createElementNS('http://www.w3.org/2000/svg','rect');
    r.setAttribute('x', h.x); r.setAttribute('y', h.y);
    r.setAttribute('width', h.w); r.setAttribute('height', h.h);
    r.setAttribute('class','hotbox');
    r.addEventListener('click', ()=> openPopup(h));
    g.appendChild(r);

    // 2) (Opsiyonel) saÄŸ yanÄ±na kÃ¼Ã§Ã¼k â€œÄ°nceleâ€ hapÄ± koymak istersen:
    //    Ä°stersen bu bloÄŸu kapatÄ±p sadece gÃ¶rÃ¼nmez kutu ile de bÄ±rakabilirsin.
    const pillPadding = 8, pillW = 62, pillH = 22;
    const pill = svgDoc.createElementNS('http://www.w3.org/2000/svg','rect');
    pill.setAttribute('x', h.x + h.w + pillPadding);
    pill.setAttribute('y', h.y + (h.h - pillH)/2);
    pill.setAttribute('width', pillW); pill.setAttribute('height', pillH);
    pill.setAttribute('class','pill');
    pill.style.cursor='pointer';
    pill.addEventListener('click', ()=> openPopup(h));
    g.appendChild(pill);

    const txt = svgDoc.createElementNS('http://www.w3.org/2000/svg','text');
    txt.setAttribute('x', h.x + h.w + pillPadding + pillW/2);
    txt.setAttribute('y', h.y + (h.h + 6)/2); // gÃ¶rsel hizalama
    txt.setAttribute('text-anchor','middle');
    txt.setAttribute('dominant-baseline','middle');
    txt.setAttribute('class','pill-text');
    txt.textContent = "Ä°ncele";
    g.appendChild(txt);

    layer.appendChild(g);
  });
});
</script>
</body>
</html>
